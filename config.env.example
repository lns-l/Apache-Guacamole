# =============================================================================
# TEMPLATE DE CONFIGURAÇÕES DO APACHE GUACAMOLE DOCKER COMPOSE
# =============================================================================
# 
# INSTRUÇÕES:
# 1. Copie este arquivo para config.env
# 2. Edite as configurações conforme necessário
# 3. Altere especialmente as senhas antes de usar em produção
# 
# Baseado na documentação oficial: https://guacamole.apache.org/doc/gug/guacamole-docker.html
# =============================================================================

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DO BANCO DE DADOS POSTGRESQL
# -----------------------------------------------------------------------------
POSTGRES_DB=guacamole_db
POSTGRES_USER=guacamole_user
POSTGRES_PASSWORD=ALTERE_ESTA_SENHA_123
POSTGRES_HOSTNAME=postgres
POSTGRES_PORT=5432

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DO GUACD (DAEMON DE PROTOCOLOS)
# -----------------------------------------------------------------------------
GUACD_HOSTNAME=guacd
GUACD_PORT=4822
GUACD_LOG_LEVEL=info

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DA APLICAÇÃO WEB GUACAMOLE
# -----------------------------------------------------------------------------
# Porta de acesso ao Guacamole
GUACAMOLE_PORT=80

# Contexto da aplicação web (caminho de acesso)
# A imagem oficial do Guacamole serve em /guacamole
WEBAPP_CONTEXT=guacamole

# Configuração do diretório home do Guacamole
GUACAMOLE_HOME=/etc/guacamole

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE PROXY REVERSO (OPCIONAL)
# -----------------------------------------------------------------------------
# Habilitar RemoteIpValve para proxy reverso
REMOTE_IP_VALVE_ENABLED=false

# IPs permitidos para enviar headers de proxy (regex)
PROXY_ALLOWED_IPS_REGEX=^192\.168\.\d+\.\d+$

# Headers de proxy (padrões)
PROXY_BY_HEADER=X-Forwarded-By
PROXY_IP_HEADER=X-Forwarded-For
PROXY_PROTOCOL_HEADER=X-Forwarded-Proto

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE AUTENTICAÇÃO LDAP/ACTIVE DIRECTORY (OPCIONAL)
# -----------------------------------------------------------------------------
# Para usar LDAP/Active Directory (descomente e configure se necessário)
# LDAP_HOSTNAME=ldap.example.com
# LDAP_PORT=389
# LDAP_USER_BASE_DN=ou=users,dc=example,dc=com
# LDAP_USERNAME_ATTRIBUTE=uid
# LDAP_CONFIG_BASE_DN=ou=groups,dc=example,dc=com
# LDAP_GROUP_BASE_DN=ou=groups,dc=example,dc=com
# LDAP_GROUP_NAME_ATTRIBUTE=cn
# LDAP_MEMBER_ATTRIBUTE=member
# LDAP_MEMBER_ATTRIBUTE_TYPE=dn
# LDAP_USER_SEARCH_FILTER=(&(objectClass=person)(uid=%s))
# LDAP_GROUP_SEARCH_FILTER=(&(objectClass=group)(member=%s))
# LDAP_SEARCH_BIND_DN=cn=admin,dc=example,dc=com
# LDAP_SEARCH_BIND_PASSWORD=admin_password

# Para usar MySQL ao invés de PostgreSQL (descomente se necessário)
# MYSQL_HOSTNAME=mysql
# MYSQL_PORT=3306
# MYSQL_DATABASE=guacamole_db
# MYSQL_USERNAME=guacamole_user
# MYSQL_PASSWORD=guacamole_secure_password_123

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE SEGURANÇA
# -----------------------------------------------------------------------------
# Timeout de sessão (em minutos)
SESSION_TIMEOUT=30

# Timeout de conexão (em minutos)
CONNECTION_TIMEOUT=10

# Máximo de conexões simultâneas por usuário
MAX_CONNECTIONS_PER_USER=5

# Máximo de grupos por usuário
MAX_GROUPS_PER_USER=10

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE LOG
# -----------------------------------------------------------------------------
# Nível de log do Guacd (DEBUG, INFO, WARN, ERROR)
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE PERFORMANCE
# -----------------------------------------------------------------------------
# Tamanho máximo de upload de arquivo (em MB)
MAX_UPLOAD_SIZE=100

# Tamanho máximo de memória para uploads (em MB)
MAX_MEMORY_SIZE=50

# Timeout de leitura (em segundos)
READ_TIMEOUT=30000

# Timeout de escrita (em segundos)
WRITE_TIMEOUT=30000

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE VOLUMES
# -----------------------------------------------------------------------------
# Caminho para dados do PostgreSQL no container
POSTGRES_DATA_PATH=/var/lib/postgresql/data

# -----------------------------------------------------------------------------
# CONFIGURAÇÕES DE HEALTH CHECK
# -----------------------------------------------------------------------------
# Intervalo do health check (em segundos)
HEALTH_CHECK_INTERVAL=30

# Timeout do health check (em segundos)
HEALTH_CHECK_TIMEOUT=10

# Número de tentativas do health check
HEALTH_CHECK_RETRIES=3

# Período de inicialização antes do health check (em segundos)
HEALTH_CHECK_START_PERIOD=30

# =============================================================================
# CONFIGURAÇÕES TOTP (AUTENTICAÇÃO MULTIFATOR)
# =============================================================================
# Habilitar autenticação TOTP (Time-based One-Time Password)
TOTP_ENABLED=true

# Nome da entidade que emite as contas (aparece no app autenticador)
TOTP_ISSUER=Apache Guacamole

# Número de dígitos nos códigos TOTP (6, 7 ou 8)
TOTP_DIGITS=6

# Duração de validade de cada código em segundos
TOTP_PERIOD=30

# Algoritmo de hash para gerar códigos TOTP (sha1, sha256, sha512)
TOTP_MODE=sha1

# Lista de IPs/subnets que NÃO precisam de TOTP (opcional)
# TOTP_BYPASS_HOSTS=192.168.1.0/24,10.0.0.0/8

# Lista de IPs/subnets que DEVEM usar TOTP (opcional)
# TOTP_ENFORCE_HOSTS=0.0.0.0/0